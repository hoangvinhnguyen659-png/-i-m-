<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng Qu·∫£n L√Ω ƒêi·ªÉm C·ªông</title>
    <style>
        /* CSS: Ph·∫ßn trang tr√≠ giao di·ªán */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 800px;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        input, select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            flex: 1;
        }
        button {
            padding: 10px 20px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        button:hover {
            background-color: #218838;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #007bff;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .delete-btn {
            background-color: #dc3545;
            padding: 5px 10px;
            font-size: 12px;
        }
        .delete-btn:hover {
            background-color: #c82333;
        }
        .total-score {
            text-align: right;
            margin-top: 10px;
            font-size: 1.2em;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>üìù Qu·∫£n L√Ω ƒêi·ªÉm C·ªông</h1>

    <div class="input-group">
        <input type="text" id="studentName" placeholder="T√™n th√†nh vi√™n/H·ªçc sinh">
        <input type="number" id="points" placeholder="S·ªë ƒëi·ªÉm (+/-)">
        <input type="text" id="reason" placeholder="L√Ω do (V√≠ d·ª•: Ph√°t bi·ªÉu t·ªët)">
        <button onclick="addPoint()">Th√™m ƒëi·ªÉm</button>
    </div>

    <table>
        <thead>
            <tr>
                <th>Th·ªùi gian</th>
                <th>H·ªç v√† T√™n</th>
                <th>ƒêi·ªÉm</th>
                <th>L√Ω do</th>
                <th>H√†nh ƒë·ªông</th>
            </tr>
        </thead>
        <tbody id="scoreTableBody">
            </tbody>
    </table>
    
    <div class="total-score" id="totalScoreDisplay">T·ªïng ƒëi·ªÉm ghi nh·∫≠n: 0</div>
</div>

<script>
    // JavaScript: Ph·∫ßn x·ª≠ l√Ω logic

    // Khi trang web t·∫£i xong, h√£y hi·ªÉn th·ªã d·ªØ li·ªáu c≈© (n·∫øu c√≥)
    document.addEventListener('DOMContentLoaded', loadData);

    function addPoint() {
        // 1. L·∫•y gi√° tr·ªã t·ª´ c√°c √¥ nh·∫≠p li·ªáu
        const name = document.getElementById('studentName').value;
        const points = document.getElementById('points').value;
        const reason = document.getElementById('reason').value;

        // 2. Ki·ªÉm tra xem ng∆∞·ªùi d√πng ƒë√£ nh·∫≠p ƒë·ªß ch∆∞a
        if (name === '' || points === '') {
            alert("Vui l√≤ng nh·∫≠p t√™n v√† s·ªë ƒëi·ªÉm!");
            return;
        }

        // 3. T·∫°o ƒë·ªëi t∆∞·ª£ng ch·ª©a th√¥ng tin
        const entry = {
            id: Date.now(), // T·∫°o ID duy nh·∫•t d·ª±a tr√™n th·ªùi gian
            date: new Date().toLocaleString('vi-VN'),
            name: name,
            points: parseInt(points),
            reason: reason || 'Kh√¥ng c√≥ ghi ch√∫'
        };

        // 4. L∆∞u v√†o LocalStorage
        saveToLocalStorage(entry);

        // 5. Hi·ªÉn th·ªã l√™n b·∫£ng v√† x√≥a √¥ nh·∫≠p
        renderTable();
        clearInputs();
    }

    function saveToLocalStorage(entry) {
        let data = JSON.parse(localStorage.getItem('scoreData')) || [];
        data.push(entry);
        localStorage.setItem('scoreData', JSON.stringify(data));
    }

    function loadData() {
        renderTable();
    }

    function renderTable() {
        const tbody = document.getElementById('scoreTableBody');
        tbody.innerHTML = ''; // X√≥a b·∫£ng c≈© ƒë·ªÉ v·∫Ω l·∫°i
        let data = JSON.parse(localStorage.getItem('scoreData')) || [];
        let total = 0;

        // Duy·ªát qua t·ª´ng b·∫£n ghi ƒë·ªÉ t·∫°o h√†ng trong b·∫£ng
        data.forEach((item, index) => {
            total += item.points;
            
            let row = `<tr>
                <td>${item.date}</td>
                <td><strong>${item.name}</strong></td>
                <td style="color: ${item.points >= 0 ? 'green' : 'red'}">${item.points > 0 ? '+' : ''}${item.points}</td>
                <td>${item.reason}</td>
                <td><button class="delete-btn" onclick="deleteEntry(${index})">X√≥a</button></td>
            </tr>`;
            tbody.innerHTML += row;
        });

        // C·∫≠p nh·∫≠t t·ªïng ƒëi·ªÉm hi·ªÉn th·ªã (ch·ªâ mang t√≠nh tham kh·∫£o t·ªïng quan)
        document.getElementById('totalScoreDisplay').innerText = `T·ªïng ƒëi·ªÉm ghi nh·∫≠n: ${total}`;
    }

    function deleteEntry(index) {
        if(confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a d√≤ng n√†y kh√¥ng?')) {
            let data = JSON.parse(localStorage.getItem('scoreData')) || [];
            data.splice(index, 1); // X√≥a ph·∫ßn t·ª≠ t·∫°i v·ªã tr√≠ index
            localStorage.setItem('scoreData', JSON.stringify(data));
            renderTable(); // V·∫Ω l·∫°i b·∫£ng
        }
    }

    function clearInputs() {
        document.getElementById('studentName').value = '';
        document.getElementById('points').value = '';
        document.getElementById('reason').value = '';
        document.getElementById('studentName').focus(); // ƒê∆∞a con tr·ªè chu·ªôt v·ªÅ √¥ nh·∫≠p t√™n
    }
</script>

</body>
</html>
